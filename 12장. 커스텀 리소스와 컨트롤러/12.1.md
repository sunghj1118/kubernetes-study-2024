## μΏ λ²„λ„¤ν‹°μ¤ μ»¨νΈλ΅¤λ¬μ κ°λ…κ³Ό λ™μ‘ λ°©μ‹

### **λ…λ Ήν•(Imperative) vs μ„ μ–Έμ (Declarative)**

**λ…λ Ήν•**: νΉμ • λ…λ Ήμ„ μ²λ¦¬ν•λ” μ£Όμ²΄μ™€ ν†µμ‹ ν•΄ μ‘μ—… μν–‰ν•κ³  κ²°κ³Όκ°’ λλ ¤λ°›λ” λ°©μ‹

- ex. `docker run` (μ»¨ν…μ΄λ„ μƒμ„±)
- ex. `kubectl run` (λ„μ»¤ λ°λ¬μ„ μµνκΈ° μ„ν•΄ μ‚¬μ©ν–λ λ€λ¶€λ¶„μ λ…λ Ήμ–΄κ°€ λ…λ Ήν• λ°©μ‹)

**μ„ μ–Έν•**: current state β†’ desired state (μΌμΉν•λ„λ΅ λ§λ“λ” λ°©μ‹) 

- ex. `kubectl apply -f  ~~.yaml` (yaml νμΌμ΄ μµμΆ…μ μΌλ΅ λ„λ‹¬ν•΄μ•Όν•λ” μƒνƒ) β†’ ν„μ¬ μƒνƒκ°€ ν•΄λ‹Ή yaml νμΌκ³Ό μΌμΉν•λ„λ΅ νΉμ • λ™μ‘μ„ μν–‰

### **Example**

- kubectlλ΅ AλΌλ” λ¦¬μ†μ¤ μƒμ„±ν•λ” μμ 
- μΏ λ²„λ„¤ν‹°μ¤λ” λ‚΄λ¶€μ μΌλ΅ μ„ μ–Έν• λ°©μ‹μ„ μ§€ν–¥ν•μ§€λ§, μ‚¬μ©μκ°€ μ„ νƒν•΄ μ‚¬μ©ν•  μ μλ„λ΅ λ…λ Ήκ³Ό μ„ μ–Έ λ¨λ‘ μ κ³µ

**λ…λ Ήν• λ°©μ‹ version** 

![image](https://github.com/user-attachments/assets/c850331f-1cd1-4661-a6d9-593a1ead879d)
- `kubectl create -f`: μƒλ΅μ΄ λ¦¬μ†μ¤ μƒμ„±
- `kubectl run` : νλ“ μƒμ„±

```bash
$ kubectl create -f completed-pod.yaml
pod/completed-pod-example created

$ kubectl create -f completed-pod.yaml
Error from server (AlreadyExists): error when creating "completed-pod.yaml": pods "completed-pod-example" already exists
```

**μ„ μ–Έν• λ°©μ‹ version**

![image](https://github.com/user-attachments/assets/7d21a403-4804-4661-9492-6eccfbffdb88)
- `kubectl apply -f`: μµμΆ…μ  μ™„μ„± μƒνƒμ YAML νμΌλ§ μ•λ ¤μ¤„λΏ, μ‹¤μ λ΅ μ–΄λ–¤ λ™μ‘μ„ ν•΄μ•Όν• μ§€λ” λ…μ‹ν•μ§€ μ•μ!
- π’΅κ·Έλ ‡λ‹¤λ©΄ μ–΄λ–¤ λ™μ‘(νλ“ μƒμ„± λ“±)μ„ μ·¨ν•΄μ•Όν• μ§€λ” λ„κ°€ κ²°μ •ν• κΉ?
    
    β†’ λ°”λ΅λ°”λ΅ **`μ»¨νΈλ΅¤λ¬`**! 
    

### **Desired State**
```bash
$ kubectl get rs
NAME                              DESIRED   CURRENT   READY   AGE
minreadyseconds-v1-75b966db7c     1         1         1       4h57m
...
```

- μλ¥Όλ“¤μ–΄, λ””ν”λ΅μ΄λ¨ΌνΈ μƒμ„±ν• λ’¤ λ ν”λ¦¬μΉ΄μ…‹μ μƒνƒλ¥Ό ν™•μΈν•΄λ³΄λ©΄ μ„μ™€ κ°™μ΄ DESIRED ν•­λ©μ΄ μ μ‹λ¨
- RS μ…μ¥μ **λ°”λμ§ν• μƒνƒ**: νΉμ • κ°μμ νλ“κ°€ μƒμ„±λμ–΄ μ‹¤ν–‰ μ¤‘μΈ μƒνƒ!
    - if νλ“ ν•λ‚ μ‚­μ λλ©΄ ) λ ν”λ¦¬μΉ΄μ…‹μ€ λ°”λμ§ν• μƒνƒ μ μ§€ν•κΈ° μ„ν•΄ μƒλ΅μ΄ νλ“ μƒμ„±!
    - λ”°λΌμ„ rsκ°€ λΌλ²¨ μ…€λ ‰ν„°κ°€ μΌμΉν•λ” νλ“ μƒμ„±ν•  λ•λ„ μ„ μ–Έν• λ°©μ‹μ μΌμΆ…μ„ μ‚¬μ©ν•κ³  μλ” μ…
- λ€λ¶€λ¶„μ μΏ λ²„λ„¤ν‹°μ¤ μ¤λΈμ νΈλ” μ΄λ° μ›λ¦¬μ— λ”°λΌ μ μ–΄λ¨

### μ»¨νΈλ΅¤λ¬ λ§¤λ‹μ €

```bash
$ kubectl get pods -n kube-system
NAME                                  READY   STATUS    RESTARTS   AGE
...
kube-controller-manager-..            1/1     Running   40         46d
```

- μ „μ²΄ κµ¬μ„±μ λ³µμ΅μ„± μ¤„μ΄κΈ° μ„ν•΄ μ»¨νΈλ΅¤λ¬ λ΅μ§μ„ **μΏ λ²„λ„¤ν‹°μ¤ μ»¨νΈλ΅¤λ¬ λ§¤λ‹μ €**λΌλ” ν•λ‚μ μ»΄ν¬λ„νΈμ—μ„ κµ¬ν„
- kube-system λ„¤μ„μ¤νμ΄μ¤μ—μ„ **νλ“λ΅** μ‹¤ν–‰λκ³  μμ
- μ»¨νΈλ΅¤λ¬ λ§¤λ‹μ €μ—λ” λ””ν”λ΅μ΄λ¨ΌνΈ μ»¨νΈλ΅¤λ¬, λ…Έλ“ μ»¨νΈλ΅¤λ¬ λ“± λ‹¤μ–‘ν• μ»¨νΈλ΅¤λ¬κ°€ **λ™μ‹μ— μ‹¤ν–‰**λ¨
- μƒνƒ λ³€ν™” κ°μ§€ μ μ ν• μ‘μ—… μν–‰
